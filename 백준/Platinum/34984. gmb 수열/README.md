# [Platinum III] gmb 수열 - 34984 

[문제 링크](https://www.acmicpc.net/problem/34984) 

### 성능 요약

메모리: 2812 KB, 시간: 384 ms

### 분류

다이나믹 프로그래밍

### 제출 일자

2025년 12월 29일 22:08:15

### 문제 설명

<p>대전대신고등학교 선배들은 제1회 코더즈 코딩페어를 준비하느라 고생한 짐비를 위해 수열을 선물해 주기로 했다.</p>

<p>짐비가 선물로 받기에 적절한 수열을 생각하던 선배들은 짐비의 BOJ 핸들인 gmb9817에 주목했다. 핸들 뒷부분의 네 자리 숫자 $9817$을 숫자별로 끊어 나열한 수열인 $[9, 8, 1, 7]$은 $9-8=1$, $8-1=7$과 같이 앞의 두 항의 뺄셈 결과가 다음 항이 되는 규칙이 있었던 것이다.</p>

<p>선배들은 이 규칙을 바탕으로 <strong>gmb 수열</strong>을 만들게 되었다. <strong>gmb 수열</strong>의 정의는 아래와 같다.</p>

<ul>
<li>길이가 $3$ 이상인 수열 $[A_1, A_2, \cdots, A_K]$ 중 $1\le x\le K-2$를 만족하는 모든 정수 $x$에 대해 $A_x-A_{x+1}=A_{x+2}$를 만족할 때, <strong>​​​​gmb 수열</strong>이라고 한다.</li>
<li>길이가 $2$ 이하인 모든 수열은 <strong>gmb 수열</strong>이 아니다. 따라서 빈 수열도 <strong>gmb 수열</strong>이 아니다.</li>
</ul>

<p>하지만 아무 수열이나 선물하면 짐비가 만족하지 않을 수 있기 때문에, 선배들은 짐비가 수열을 선물 받았을 때 얼마나 만족할지를 나타내는 척도인 만족도를 알아보기로 했다. 길이 $N$인 수열 $B$에 대해 만족도는 $B$의 $2^N$개의 부분 수열 중 <strong>gmb 수열</strong>인 것의 개수로 정의된다.</p>

<p>선배들을 위해, 수열 $B$가 주어졌을 때 해당 수열의 만족도를 구해보자.</p>

### 입력 

 <p>첫번째 줄에 수열 $B$의 길이 $N$이 주어진다. $(1 \le N \le 2 \times 10^5)$</p>

<p>두번째 줄에 음이 아닌 정수 $B_1, B_2, \cdots, B_N$이 공백으로 구분되어 주어진다. $(0 \le B_i < 300)$</p>

### 출력 

 <p>첫번째 줄에 수열 $B$의 만족도를 $10^9+7$로 나눈 나머지를 출력한다.</p>

