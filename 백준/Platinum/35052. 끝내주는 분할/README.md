# [Platinum V] 끝내주는 분할 - 35052 

[문제 링크](https://www.acmicpc.net/problem/35052) 

### 성능 요약

메모리: 14920 KB, 시간: 400 ms

### 분류

자료 구조, 그리디 알고리즘, 세그먼트 트리

### 제출 일자

2026년 2월 1일 00:25:59

### 문제 설명

<p>두 개의 <strong>순열</strong>을 가지고 무언가 생각하던 snrnsidy는 아래와 같은 문제를 만들어 냈다.</p>

<p>길이가 $N$인 두 순열 $A$와 $B$가 주어진다. $A$와 $B$에서 동일한 위치를 골라서 각각을 $K$개의 연속된 조각으로 나누려고 한다. 단, 각 $i = 1, 2, \dots, K$와 $j_i= 1, 2, \dots, (i$번째 조각의 길이$)$에 대해, $A$의 $i$번째 조각의 $j_i$번째 최솟값의 위치와 $B$의 $i$번째 조각의 $j_i$번째 최솟값의 위치가 <strong>서로 모두</strong> 같아야 한다.</p>

<p>예를 들어, $A =(1, 3, 2, 5, 4)$이고 $B = (5, 4, 3, 2, 1)$라 하자. 만약 $A$를 $(1), (3, 2), (5, 4)$로 나누면, $B$는 $(5), (4, 3), (2, 1)$로 나누어지며, 위에서 설명한 조건을 만족시킨다. 물론 $A$와 $B$를 길이가 $1$인 $n$개의 조각들로 나누면 위 조건을 쉽게 만족시킬 수 있다.</p>

<p>따라서 우리는 조건을 만족하면서 조각의 수 $K$가 최소가 되도록 나누고자 하며, 이러한 분할을 <strong>끝내주는 분할</strong>이라고 하자. 위 예시에서 $K = 3$인 분할이 <strong>끝내주는 분할</strong>이다.</p>

<p>하지만 snrnsidy는 <strong>끝내주는 분할</strong>을 찾는 프로그램을 구현할 생각에 눈앞이 캄캄해졌다.</p>

<blockquote>
<p>하아...</p>
</blockquote>

<p>한숨을 쉬는 snrnsidy를 대신해 여러분이 <strong>끝내주는 분할</strong>을 찾는 프로그램을 구현해 주자.</p>

### 입력 

 <p>첫째 줄에 순열 $A$와 $B$의 길이를 나타내는 양의 정수 $N$이 주어진다. $(1 \le N \le 300\,000)$</p>

<p>둘째 줄에 순열 $A$의 원소 $A_1, A_2, \cdots, A_N$이 공백으로 구분되어 주어진다.</p>

<p>셋째 줄에 순열 $B$의 원소 $B_1, B_2,  \cdots, B_N$이 공백으로 구분되어 주어진다.</p>

### 출력 

 <p>첫째 줄에 <strong>끝내주는 분할</strong>의 조각 수를 출력한다.</p>

