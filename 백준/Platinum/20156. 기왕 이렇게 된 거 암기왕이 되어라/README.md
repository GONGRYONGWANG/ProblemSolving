# [Platinum IV] 기왕 이렇게 된 거 암기왕이 되어라 - 20156 

[문제 링크](https://www.acmicpc.net/problem/20156) 

### 성능 요약

메모리: 9104 KB, 시간: 68 ms

### 분류

자료 구조, 분리 집합, 오프라인 쿼리

### 제출 일자

2025년 7월 12일 22:57:28

### 문제 설명

<p>정훈이는 1등 상품이 어마어마한 암기왕을 뽑는 대회에 참여했다. 암기왕을 가리는 문제는 다음과 같은 초기 상태에서 <em>M</em>번의 라운드의 결과를 다 외워야 한다.</p>

<p>초기 상태에서 <em>N</em>명의 학생은 각자 멘토가 최대 한 명씩 존재한다. 어느 학생의 멘티들이 그 학생의 멘토가 될 수는 없다. 멘티의 멘티, 멘티의 멘티의 멘티 … 들도 역시 그 학생의 멘토가 될 수 없다. 멘토와 멘티는 서로 같은 스터디 그룹이다.</p>

<p>초기 상태에서 <em>M</em>번의 라운드를 거치게 된다. 라운드가 시작되면 학생 번호 <em>X</em>를 정하게 되는데 학생 <em>X</em>는 멘토와의 관계를 정리하고 자신의 멘티들을 데리고 새로운 스터디 그룹을 만들게 된다. 멘티의 멘티, 멘티의 멘티의 멘티… 들도 같이 데리고 나온다. 만약 멘토가 없다면 아무것도 하지 않는다. 그다음 라운드를 종료한다.</p>

<p><em>M</em>번의 라운드가 종료된 후 <em>K</em>번의 다음과 같은 문제를 낸다.</p>

<ul>
	<li><em>A B C</em> : <em>A</em>번째 라운드가 종료된 후 학생 <em>B</em>와 <em>C</em>는 같은 스터디 그룹인가?</li>
</ul>

<p><em>A</em>가 0이라면 초기 상태에서 <em>B</em>와 <em>C</em>가 같은 스터디 그룹인지 대답해야 한다.</p>

<p>정훈이 전 기록이 모든 문제 중 1개 빼고 정답이라 1등을 하려면 모든 문제에 정답을 말해야 한다. 정훈이는 긴장한 탓에 머리가 하얗게 되었다. 정훈이를 도와 <em>K</em>번의 모든 문제에 대한 답을 구하여라.</p>

### 입력 

 <p>첫째 줄에 세 정수 <em>N</em> (1 ≤ <em>N</em> ≤ 100,000)과 <em>M</em> (0 ≤ <em>M</em> ≤ 100,000), K (1 ≤ <em>K</em> ≤ 100,000)이 주어진다.</p>

<p>다음 줄에 1번부터 <em>N</em>번 학생의 멘토 번호가 차례대로 주어진다. 만약 멘토가 없다면 -1이 주어진다.</p>

<p>그 다음 <em>M</em>개의 줄에 학생 번호 <em>X</em> (1 ≤ <em>X</em> ≤ <em>N</em>)가 정수로 주어진다.</p>

<p>그 다음 <em>K</em>개의 줄에 세 정수 <em>A</em> (0 ≤ <em>A</em> ≤ <em>M</em>), <em>B</em> (1 ≤ <em>B</em> ≤ <em>N</em>), <em>C</em> (1 ≤ <em>C</em> ≤ <em>N</em>)가 주어진다.</p>

### 출력 

 <p><em>K</em>개의 각 질문에 대한 답을 한 줄에 하나씩 출력한다.</p>

<p>같은 스터디 그룹이라면 <code>Same Same;</code> 아니라면 <code>No;</code>를 출력한다.</p>

